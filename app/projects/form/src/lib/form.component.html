<div class="forms theme1">
    <ng-container *ngIf="formTemplate.length > 0 && formTemplate.length == forms.length">
        <form *ngFor="let form of formTemplate; let formIndex=index" [formGroup]="forms[formIndex]" class="bgWhite">
            <div fxLayout="row wrap" fxLayoutWrap>
                <ng-container *ngFor="let field of formTemplate[formIndex].fields">
                    <div fxLayout="column" [fxFlex]="100 * (field.col / 12)" [fxFlex.xs]="100"
                        [fxFlex.sm]="(100 * (field.col / 12))*2" class="field-padding">
                        <ng-container
                            *ngTemplateOutlet="field.inputType === formInputType.CUSTOM? customTemplate: inputField; context: {field: field, formIndex: formIndex}">
                        </ng-container>
                    </div>
                </ng-container>
            </div>
        </form>
    </ng-container>
    <div class="actions">
        <button mat-button [class.mat-raised-button]="actionButtonsRaised" [color]="actionButton.style"
            *ngFor="let actionButton of actionButtons" class="actionButtons"
            (click)="onAction(actionButton.text, actionButton.outputForm)">{{actionButton.text}}</button>
    </div>

</div>

<ng-template #inputField let-field="field" let-formIndex="formIndex">
    <mat-form-field [formArray]="forms[formIndex]" fxLayout="column" [fxFlex]="100 * (field.col / 12)" [fxFlex.xs]="100"
        [fxFlex.sm]="(100 * (field.col / 12))*2"
        [formGroup]="forms[formIndex]" class="field-padding" [attr.class]="'input-type-' + field.inputType">
        <mat-label [class.empty]="!forms[formIndex].controls[field.name].value" class="noselect">{{field.placeholder}}</mat-label>
        <ng-container [ngSwitch]="field.inputType">
            <ng-container *ngSwitchCase="formInputType.CHIPS">
                <lib-chips [placeholder]="field.placeholder" [control]="forms[formIndex].get(field.name)" [options]="field.options"></lib-chips>
            </ng-container>
            <ng-container *ngSwitchCase="formInputType.AUTO_COMPLETE_TEXT_INPUT">
                <lib-auto-complete-text-input [placeholder]="field.placeholder" [control]="forms[formIndex].get(field.name)" [options]="field.options"></lib-auto-complete-text-input>
            </ng-container>
            <ng-container *ngSwitchCase="formInputType.SWITCH">
                <lib-switch [placeholder]="field.placeholder" [control]="forms[formIndex].get(field.name)"></lib-switch>
            </ng-container>
            <ng-container *ngSwitchCase="formInputType.TEXT_INPUT">
                <!--<input type="text" data-lpignore="true" [placeholder]="field.placeholder"
                    [aria-label]="field.placeholder" matInput [formControlName]="field.name" style="min-width:100px;" />-->
                <lib-text-input [type]="IHTML_INPUT_TYPES.TEXT" [placeholder]="field.placeholder" [control]="forms[formIndex].get(field.name)"></lib-text-input>
            </ng-container>
            <ng-container *ngSwitchCase="formInputType.TEXT_INPUT_NUMBER">
                <lib-text-input [type]="IHTML_INPUT_TYPES.NUMBER" [regex]="regexNumbersOnly" [placeholder]="field.placeholder" [control]="forms[formIndex].get(field.name)"></lib-text-input>
            </ng-container>
        </ng-container>
    </mat-form-field>
</ng-template>